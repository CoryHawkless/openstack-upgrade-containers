
    - name: Container include - Upgraders
      tags: container-upgrader
      include_tasks:  containers/dockerContainer.yml
      vars:
         containers:


              UpgradeO:
                 name: Upgrader-Ocata
                 target: nova_API
                 image: "ocata-nova"
                 command: "/bin/sleep infinity"
                 networks:
                   - name: bridge
                 mappings:
                   templates:
                     cinder.conf:
                         src: cinder.conf.j2
                         dest: /etc/cinder/cinder.conf
                         generic:
                     nova.conf:
                        src: nova.conf.j2
                        dest: /etc/nova/nova.conf
                        generic:

              UpgradeQ:
                 name: Upgrader-Queens
                 target: nova_API
                 image: "queens-upgrader"
                 command: "/bin/sleep infinity"
                 networks:
                   - name: bridge
                 mappings:
                   templates:
                     cinder.conf:
                         src: cinder.conf.j2
                         dest: /etc/cinder/cinder.conf
                         generic:
                     nova.conf:
                        src: nova.conf.j2
                        dest: /etc/nova/nova.conf
                        generic:

              UpgradeS:
                 name: Upgrader-Stein
                 target: nova_API
                 image: "stein-upgrader"
                 command: "/bin/sleep infinity"
                 networks:
                   - name: bridge
                 mappings:
                   templates:
                     cinder.conf:
                         src: cinder.conf.j2
                         dest: /etc/cinder/cinder.conf
                         generic:
                     nova.conf:
                        src: nova.conf.j2
                        dest: /etc/nova/nova.conf
                        generic:

              UpgradeU:
                 name: Upgrader-Ussuri
                 target: nova_API
                 image: "ussuri-upgrader"
                 command: "/bin/sleep infinity"
                 networks:
                   - name: bridge
                 mappings:
                   templates:
                     cinder.conf:
                         src: cinder.conf.j2
                         dest: /etc/cinder/cinder.conf
                         generic:
                     nova.conf:
                        src: nova.conf.j2
                        dest: /etc/nova/nova.conf
                        generic:


              KeystoneV:
                name: Keystone-Upgrader-Victoria
                target: keystone_API
                image: "{{docker_registry}}/keystone"
                command: "/bin/sleep infinity"
                networks:
                  - name: bridge
                mappings:
                  templates:
                    keystone.conf:
                        src: keystone.conf.j2
                        dest: /etc/keystone/keystone.conf
                        generic:
                    keystonewsgi.conf:
                        src: keystone.wsgi.conf.j2
                        dest: /etc/apache2/sites-available/keystone.conf
                        generic:
                  volumes:
                    keys:
                        type: local
                        volumeName: keys
                        dest: /etc/keystone/keys/
                  files:
                    fernet_0:
                        src_text: "{{fernet_0}}"
                        dest: /etc/keystone/keys/fernet/0
                        generic:
                    fernet_1:
                        src_text: "{{fernet_1}}"
                        dest: /etc/keystone/keys/fernet/1
                        generic:
                    credential_0:
                        src_text: "{{credential_0}}"
                        dest: /etc/keystone/keys/credential/0
                        generic:
                    credential_1:
                        src_text: "{{credential_1}}"
                        dest: /etc/keystone/keys/credential/1
                        generic:
                    receipt_0:
                        src_text: "{{receipt_0}}"
                        dest: /etc/keystone/keys/receipt/0
                        generic:
                    receipt_1:
                        src_text: "{{receipt_1}}"
                        dest: /etc/keystone/keys/receipt/1
                        generic:

              NovaV:
                name: Nova-Upgrader-Victoria
                target: nova_API
                image: "{{docker_registry}}/nova"
                command: "/bin/sleep infinity"
                networks:
                  - name: bridge
                mappings:
                  templates:
                    nova.conf:
                        src: nova.conf.j2
                        dest: /etc/nova/nova.conf
                        generic:



              GlanceV:
                name: Glance-Upgrader-Victoria
                target: glance_API
                image: "{{docker_registry}}/glance"
                command: "/bin/sleep infinity"
                networks:
                    - name: bridge
                mappings:
                    templates:
                      cinder.keyring:
                           src: openstack.keyring.j2
                           dest: /etc/ceph/ceph.client.openstack.keyring
                           generic:
                      ceph.conf:
                           src: ceph.conf.j2
                           dest: /etc/ceph/ceph.conf
                           generic:
                      glance.conf:
                        src: glance-api.conf.j2
                        dest: /etc/glance/glance-api.conf
                        generic:


              NeutronV:
                name: Neutron-Upgrader-Victoria
                target: neutron_API
                image: "{{docker_registry}}/neutron"
                command: "/bin/sleep infinity"
                networks:
                  - name: bridge
                mappings:
                  templates:
                    neutron.conf:
                        src: neutron.conf.j2
                        dest: /etc/neutron/neutron.conf
                        generic:
                    ml2:
                        src: ml2_conf.ini.j2
                        dest: /etc/neutron/plugins/ml2/ml2_conf.ini
                        generic:
                  files:
                    startSH:
                        src: start_neutron.sh
                        dest: /start.sh
                        generic:


              CinderV:
                 name: Upgrader-Victoria
                 target: nova_API
                 image: "{{docker_registry}}/cinder"
                 command: "/bin/sleep infinity"
                 networks:
                   - name: bridge
                 mappings:
                   templates:
                     cinder.conf:
                         src: cinder.conf.j2
                         dest: /etc/cinder/cinder.conf
                         generic:






      with_dict: "{{containers}}"
      when: item.value.target in group_names
